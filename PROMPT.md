# Zehntage

I have 10 days until my German exam so I need to learn extremely fast.

For that I want to write a lua plugin for nvim.

What do I want:

I want to efficiently create anki cards from books I read.

See my current nvim configuration for details.

## Desired functionality:

### :ZehnTage

#### pseudocode:

let w = word under the cursor

if w in (words we currently learn):
    remove it from there
    let context = 3 lines: 1 line above and 1 below the current line, and the current line
    - type there something like "Given the context above, translate the word '{w}', add concise notes for better learning/understanding if any". It should return structured json like 
```json
{"translation":"verneinung","notes":"comes from the word 'nein'"}
```
. Use google gemini 2.5 flash. It should take the api key from GEMINI_API_KEY environment variable. I think you should just http GET the requests.
    - add the word to the list

show a floating window (like it does when i press leader-d, K or M-k - see config), that will have the word in bold, and the notes below.
If possible, make the second call of :ZehnTage on the same word actually focus the window, like i do with M-k if I am not mistaken.


### :ZehnTageClear

removes the word under cursor from the words list. On conflict do nothing.

### Highlighting

There is a plugin that highlights colors in my configuration - it works very fast. We need to implement something similar - you should really just inspect the code used there.

I want the words from the list to be highlighted.


### Storage

Here, words we currently learn are stored in tsv. I will import them to anki after every reading session or write code for that later.

front	back	context	notes
verneinung	negation	<the 3 lines from above, where the word in question is highlighted>	<notes as generated by gemini (if any)>

Store the file in some standard nvim directory, whatever, like words.tsv or something like that. Load the file on buffer enter or something - make it fast/lazy.


## Style

Write pure lua, lean code. The code should really be dead simple. I want to be able to add this plugin like
```lua
{ "30be/zehntage",
  opts = {}, -- Dont parametrize anything, really. Keep it simple.
    ft = { "markdown", "text" },
  keys = {
    {"<leader>z", "<cmd>ZehnTage<CR>", desc = "ZehnTage add word"},
    {"<leader>c", "<cmd>ZehnTageClear<CR>", desc = "ZehnTage clear word"},
  }
}
```

## Notes

This directory is a template repo, see README.md for details. Be lean,simple,stupid, and try to fit in a single file if possible.
